# v1
def uniquePathsWithObstacles(obstacleGrid):
    memo = {}
    def helper(m,n):
        if (m,n) in memo: return memo[(m,n)]
        if m == 0 or n == 0: return 0
        if obstacleGrid[-m][-n] == 1: return 0
        if m==1 and n ==1 :return 1

        memo[(m,n)] = helper(m,n-1) + helper(m-1,n)
        return memo[(m,n)]

    return helper(len(obstacleGrid),len(obstacleGrid[0]))
#v2
def mazeObstacles(matrix):
    memo = {}
    def helper(r,c):
        if (r,c) in memo : return memo[(r,c)]
        rBounds =  0 <= r < len(matrix)
        cBounds =  0 <= c < len(matrix[0])
        if not rBounds or not cBounds : return 0 
        if matrix[r][c] == 1 : return 0
        if r == len(matrix)-1 and c == len(matrix[0])-1 : return 1
        down = helper(r+1,c)
        right = helper(r,c+1)
        memo[(r,c)] =  down + right
        return memo[(r,c)]
    return helper(0,0)


if __name__ == '__main__':
    obstacleGrid = [[0,0,0],[0,1,0],[0,0,0]]
    obstacleGrid = [[0,0,0,0,0],[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0]]

    obstacleGrid = [[0,1],[0,0]]
    obstacleGrid = [[0,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,0,0],
                    [0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,1,0,0],
                    [1,0,0,0,0,0,1,0,0,0,0,0,1,0,1,1,0,1],
                    [0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],
                    [0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0],
                    [0,0,0,0,0,1,0,0,0,0,1,1,0,1,0,0,0,0],
                    [1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0],
                    [0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0],
                    [0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                    [1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0],
                    [0,0,1,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0],
                    [0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0],
                    [0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1],
                    [0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0],
                    [0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1],
                    [1,0,1,1,0,0,0,0,0,0,1,0,1,0,0,0,1,0],
                    [0,0,0,1,0,0,0,0,1,1,1,0,0,1,0,1,1,0],
                    [0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
                    [0,1,1,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0],
                    [0,0,0,0,0,0,1,0,1,0,0,1,0,1,1,1,0,0],
                    [0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,1],
                    [0,1,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0],
                    [1,0,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0],
                    [0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0],
                    [0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,0],
                    [1,0,1,0,1,0,0,0,0,0,0,1,1,0,0,0,0,1],
                    [1,0,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0]]
    print(uniquePathsWithObstacles(obstacleGrid))   